<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>TAKIå·¥ä½œ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      :root {
        --bg-color: rgba(255, 255, 255, 0.65);
        --bg-color-strong: rgba(255, 255, 255, 0.9);
        --text-color: #1f2933;
        --muted-text: #6b7280;
        --accent-blue: #2154ff; /* å…‹è±å› è“ */
        --accent-mint: #2cd3b8;
        --border-subtle: rgba(255, 255, 255, 0.6);
        --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.25);
        --radius-xl: 999px;
        --radius-lg: 20px;
        --transition-fast: 160ms ease-out;
        --transition-medium: 220ms ease-out;
      }

      body.dark {
        --bg-color: rgba(15, 23, 42, 0.9);
        --bg-color-strong: rgba(15, 23, 42, 0.95);
        --text-color: #e5e7eb;
        --muted-text: #9ca3af;
        --border-subtle: rgba(148, 163, 184, 0.4);
        --shadow-soft: 0 20px 55px rgba(0, 0, 0, 0.65);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        min-height: 100vh;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Inter",
          "Segoe UI", "Microsoft YaHei", sans-serif;
        color: var(--text-color);
        position: relative;
        overflow: hidden;
      }

      .bg {
        position: fixed;
        inset: 0;
        z-index: -1;
        background: radial-gradient(circle at 0% 0%, #f3e8ff 0, transparent 55%),
          radial-gradient(
            circle at 100% 0%,
            rgba(191, 219, 254, 0.9) 0,
            transparent 55%
          ),
          radial-gradient(
            circle at 50% 100%,
            rgba(254, 243, 199, 0.8) 0,
            transparent 55%
          ),
          linear-gradient(135deg, #f5f3ff, #e0f2fe, #fefce8);
        background-size: 140% 140%;
        animation: moveGradient 22s ease-in-out infinite alternate;
        filter: saturate(1.2);
      }

      body.dark .bg {
        background: radial-gradient(circle at 0% 0%, #1e293b 0, transparent 55%),
          radial-gradient(
            circle at 100% 0%,
            rgba(30, 64, 175, 1) 0,
            transparent 55%
          ),
          radial-gradient(
            circle at 50% 100%,
            rgba(15, 118, 110, 0.9) 0,
            transparent 60%
          ),
          linear-gradient(135deg, #020617, #020617, #020617);
        background-size: 160% 160%;
      }

      @keyframes moveGradient {
        0% {
          background-position: 0% 0%;
        }
        50% {
          background-position: 50% 100%;
        }
        100% {
          background-position: 100% 10%;
        }
      }

      .bg.blur {
        filter: blur(40px) saturate(1.3);
        opacity: 0.95;
      }

      .app {
        position: relative;
        z-index: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        min-height: 100vh;
        padding: 32px 20px 20px;
      }

      .main {
        width: 100%;
        max-width: 880px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 32px;
        margin-top: 6vh;
      }

      /* Header / Clock */
      .clock {
        text-align: center;
        margin-top: 4vh;
        user-select: none;
      }

      .clock-time {
        font-size: clamp(64px, 9vw, 96px);
        font-weight: 700;
        letter-spacing: 0.06em;
        color: var(--text-color);
        text-shadow: 0 18px 50px rgba(15, 23, 42, 0.35);
        display: flex;
        align-items: baseline;
        justify-content: center;
        gap: 0.08em;
      }

      .clock-time span.colon {
        display: inline-block;
        width: 0.7em;
        text-align: center;
        animation: blink 1.1s ease-in-out infinite;
        color: var(--accent-blue);
      }

      body.dark .clock-time span.colon {
        color: var(--accent-mint);
      }

      @keyframes blink {
        0%,
        100% {
          opacity: 0.3;
          transform: translateY(0);
        }
        50% {
          opacity: 1;
          transform: translateY(-2px);
        }
      }

      .clock-date {
        margin-top: 10px;
        font-size: 16px;
        letter-spacing: 0.08em;
        color: var(--muted-text);
      }

      /* Search Hub */
      .search-section {
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 12px;
        margin-top: 10px;
      }

      .search-shell {
        position: relative;
        width: 100%;
        max-width: 780px;
      }

      .search-box {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 14px 18px 14px 20px;
        border-radius: var(--radius-xl);
        backdrop-filter: blur(18px);
        -webkit-backdrop-filter: blur(18px);
        background: radial-gradient(
            circle at 0 0,
            rgba(255, 255, 255, 0.75),
            transparent 65%
          ),
          linear-gradient(
            135deg,
            rgba(255, 255, 255, 0.9),
            rgba(248, 250, 252, 0.9)
          );
        box-shadow: 0 28px 60px rgba(15, 23, 42, 0.18);
        border: 1px solid rgba(255, 255, 255, 0.9);
        transition: box-shadow var(--transition-medium),
          transform var(--transition-fast),
          border-color var(--transition-fast),
          background var(--transition-medium);
      }

      body.dark .search-box {
        background: linear-gradient(
          135deg,
          rgba(15, 23, 42, 0.96),
          rgba(15, 23, 42, 0.98)
        );
        border: 1px solid rgba(148, 163, 184, 0.55);
        box-shadow: 0 26px 70px rgba(0, 0, 0, 0.9);
      }

      .search-box.focused {
        box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.9),
          0 0 0 4px rgba(33, 84, 255, 0.1), var(--shadow-soft);
        transform: translateY(-1px);
        border-color: rgba(33, 84, 255, 0.9);
      }

      body.dark .search-box.focused {
        box-shadow: 0 0 0 1px rgba(45, 212, 191, 0.9),
          0 0 0 4px rgba(45, 212, 191, 0.1), var(--shadow-soft);
        border-color: rgba(45, 212, 191, 0.9);
      }

      .search-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 30px;
        height: 30px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.03);
        color: var(--muted-text);
        flex-shrink: 0;
      }

      body.dark .search-icon {
        background: rgba(15, 23, 42, 0.8);
        color: #9ca3af;
      }

      .search-icon svg {
        width: 16px;
        height: 16px;
      }

      .search-input {
        flex: 1;
        border: none;
        outline: none;
        background: transparent;
        font-size: 16px;
        color: var(--text-color);
      }

      .search-input::placeholder {
        color: var(--muted-text);
      }

      .search-enter {
        font-size: 13px;
        color: var(--muted-text);
        display: inline-flex;
        align-items: center;
        gap: 6px;
        border-radius: 999px;
        padding: 4px 10px;
        background: rgba(255, 255, 255, 0.7);
        border: 1px solid rgba(148, 163, 184, 0.45);
      }

      body.dark .search-enter {
        background: rgba(15, 23, 42, 0.9);
      }

      .search-enter kbd {
        font-family: inherit;
        font-size: 11px;
        padding: 2px 6px;
        border-radius: 6px;
        border: 1px solid rgba(148, 163, 184, 0.7);
        background: rgba(255, 255, 255, 0.06);
      }

      /* Dropdown */
      .dropdown {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        margin-top: 8px;
        border-radius: 18px;
        background: var(--bg-color-strong);
        box-shadow: 0 26px 70px rgba(15, 23, 42, 0.25);
        backdrop-filter: blur(24px);
        -webkit-backdrop-filter: blur(24px);
        border: 1px solid rgba(255, 255, 255, 0.9);
        padding: 10px 8px;
        max-height: 320px;
        overflow-y: auto;
        opacity: 0;
        transform: translateY(6px);
        pointer-events: none;
        transition: opacity var(--transition-medium),
          transform var(--transition-medium);
      }

      body.dark .dropdown {
        background: rgba(15, 23, 42, 0.98);
        border-color: rgba(51, 65, 85, 0.9);
      }

      .dropdown.visible {
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
      }

      .dropdown-section-title {
        font-size: 12px;
        font-weight: 600;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: var(--muted-text);
        padding: 6px 12px;
      }

      .dropdown-list {
        list-style: none;
        margin: 0;
        padding: 4px;
      }

      .dropdown-item {
        display: flex;
        align-items: center;
        gap: 10px;
        width: 100%;
        padding: 10px 10px;
        border-radius: 12px;
        border: none;
        background: transparent;
        cursor: pointer;
        text-align: left;
        color: var(--text-color);
        transition: background var(--transition-fast),
          transform var(--transition-fast), box-shadow var(--transition-fast);
      }

      .dropdown-item:not(:last-child) {
        margin-bottom: 2px;
      }

      .dropdown-item:hover {
        background: rgba(191, 219, 254, 0.35);
        transform: translateY(-1px);
      }

      body.dark .dropdown-item:hover {
        background: rgba(37, 99, 235, 0.3);
      }

      .dropdown-item.active {
        background: rgba(191, 219, 254, 0.85);
        box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
      }

      body.dark .dropdown-item.active {
        background: rgba(37, 99, 235, 0.9);
        box-shadow: 0 10px 28px rgba(30, 64, 175, 0.7);
      }

      .dropdown-item-icon {
        width: 30px;
        height: 30px;
        border-radius: 10px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.9);
        color: #1f2933;
        flex-shrink: 0;
        font-size: 14px;
      }

      body.dark .dropdown-item-icon {
        background: rgba(15, 23, 42, 0.9);
        color: #e5e7eb;
      }

      .dropdown-item-content {
        flex: 1;
      }

      .dropdown-item-title {
        font-size: 14px;
        font-weight: 600;
      }

      .dropdown-item-desc {
        font-size: 12px;
        color: var(--muted-text);
        margin-top: 2px;
      }

      .dropdown-item-tag {
        font-size: 12px;
        color: var(--muted-text);
        padding-left: 8px;
      }

      /* Tools Grid */
      .tools-section {
        width: 100%;
        margin-top: 10px;
      }

      .tools-grid {
        display: grid;
        grid-template-columns: repeat(5, minmax(0, 1fr));
        gap: 16px;
      }

      @media (max-width: 900px) {
        .tools-grid {
          grid-template-columns: repeat(4, minmax(0, 1fr));
        }
      }
      @media (max-width: 720px) {
        .tools-grid {
          grid-template-columns: repeat(3, minmax(0, 1fr));
        }
      }
      @media (max-width: 520px) {
        .tools-grid {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
      }

      .tool-card {
        position: relative;
        border-radius: 20px;
        padding: 14px 12px;
        background: rgba(255, 255, 255, 0.8);
        border: 1px solid var(--border-subtle);
        backdrop-filter: blur(14px);
        -webkit-backdrop-filter: blur(14px);
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
        cursor: pointer;
        transition: transform var(--transition-medium),
          box-shadow var(--transition-medium),
          background var(--transition-medium), border-color var(--transition-fast);
        box-shadow: 0 14px 30px rgba(15, 23, 42, 0.08);
        overflow: hidden;
      }

      body.dark .tool-card {
        background: rgba(15, 23, 42, 0.96);
        border-color: rgba(51, 65, 85, 0.9);
        box-shadow: 0 16px 36px rgba(0, 0, 0, 0.8);
      }

      .tool-card::before {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(
          circle at 0 0,
          rgba(33, 84, 255, 0.09),
          transparent 55%
        );
        opacity: 0;
        transition: opacity var(--transition-medium);
        pointer-events: none;
      }

      .tool-card:hover {
        transform: translateY(-6px) scale(1.03);
        box-shadow: 0 24px 55px rgba(15, 23, 42, 0.25);
        background: rgba(255, 255, 255, 0.96);
      }

      body.dark .tool-card:hover {
        background: rgba(15, 23, 42, 0.98);
        box-shadow: 0 26px 70px rgba(0, 0, 0, 0.95);
      }

      .tool-card:hover::before {
        opacity: 1;
      }

      .tool-icon {
        width: 34px;
        height: 34px;
        border-radius: 14px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, var(--accent-blue), var(--accent-mint));
        color: white;
        font-size: 18px;
        box-shadow: 0 10px 25px rgba(37, 99, 235, 0.6);
      }

      .tool-title {
        font-size: 14px;
        font-weight: 600;
      }

      .tool-desc {
        font-size: 12px;
        color: var(--muted-text);
      }

      .tool-meta {
        margin-top: 2px;
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 11px;
        color: var(--muted-text);
      }

      .tool-meta-pill {
        padding: 2px 6px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.7);
        background: rgba(255, 255, 255, 0.3);
      }

      body.dark .tool-meta-pill {
        background: rgba(15, 23, 42, 0.9);
      }

      /* Footer / Settings */
      .footer {
        width: 100%;
        max-width: 880px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-top: 30px;
        font-size: 13px;
        color: var(--muted-text);
      }

      .footer-right {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .footer-link {
        font-size: 12px;
        color: var(--muted-text);
        text-decoration: none;
        padding: 4px 8px;
        border-radius: 999px;
        transition: background var(--transition-fast),
          color var(--transition-fast), transform var(--transition-fast);
      }

      .footer-link:hover {
        background: rgba(148, 163, 184, 0.16);
        color: var(--text-color);
        transform: translateY(-1px);
      }

      .settings-trigger {
        width: 32px;
        height: 32px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.7);
        background: rgba(255, 255, 255, 0.8);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        color: var(--muted-text);
        box-shadow: 0 10px 20px rgba(15, 23, 42, 0.15);
        transition: transform var(--transition-fast),
          box-shadow var(--transition-fast), background var(--transition-fast);
      }

      body.dark .settings-trigger {
        background: rgba(15, 23, 42, 0.96);
        box-shadow: 0 16px 28px rgba(0, 0, 0, 0.75);
      }

      .settings-trigger:hover {
        transform: translateY(-1px) rotate(18deg);
        box-shadow: 0 14px 30px rgba(15, 23, 42, 0.24);
      }

      .settings-panel {
        position: fixed;
        right: 18px;
        bottom: 64px;
        width: 250px;
        border-radius: 18px;
        background: var(--bg-color-strong);
        border: 1px solid rgba(255, 255, 255, 0.9);
        box-shadow: 0 26px 75px rgba(15, 23, 42, 0.35);
        padding: 12px 12px 10px;
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        font-size: 13px;
        opacity: 0;
        transform: translateY(10px);
        pointer-events: none;
        transition: opacity var(--transition-medium),
          transform var(--transition-medium);
      }

      body.dark .settings-panel {
        background: rgba(15, 23, 42, 0.98);
        border-color: rgba(51, 65, 85, 0.9);
      }

      .settings-panel.visible {
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
      }

      .settings-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 10px;
        gap: 10px;
      }

      .settings-label {
        color: var(--muted-text);
      }

      .toggle {
        position: relative;
        width: 42px;
        height: 22px;
        border-radius: 999px;
        background: rgba(148, 163, 184, 0.75);
        cursor: pointer;
        transition: background var(--transition-medium);
      }

      .toggle-circle {
        position: absolute;
        top: 2px;
        left: 2px;
        width: 18px;
        height: 18px;
        border-radius: 999px;
        background: white;
        box-shadow: 0 4px 10px rgba(15, 23, 42, 0.3);
        transition: transform var(--transition-medium);
      }

      .toggle.on {
        background: linear-gradient(135deg, var(--accent-blue), var(--accent-mint));
      }

      .toggle.on .toggle-circle {
        transform: translateX(20px);
      }

      .wallpaper-options {
        display: flex;
        gap: 6px;
      }

      .wallpaper-dot {
        width: 18px;
        height: 18px;
        border-radius: 999px;
        cursor: pointer;
        border: 2px solid rgba(255, 255, 255, 0.9);
        box-shadow: 0 8px 16px rgba(15, 23, 42, 0.15);
        opacity: 0.75;
        transition: transform var(--transition-fast),
          box-shadow var(--transition-fast), opacity var(--transition-fast);
      }

      .wallpaper-dot.active {
        transform: translateY(-1px) scale(1.02);
        opacity: 1;
        box-shadow: 0 12px 26px rgba(15, 23, 42, 0.25);
      }

      .wallpaper-dot:nth-child(1) {
        background: conic-gradient(
          from 180deg,
          #f9a8d4,
          #a5b4fc,
          #bfdbfe,
          #fecaca,
          #f9a8d4
        );
      }

      .wallpaper-dot:nth-child(2) {
        background: conic-gradient(
          from 160deg,
          #22d3ee,
          #0ea5e9,
          #1d4ed8,
          #22d3ee
        );
      }

      .wallpaper-dot:nth-child(3) {
        background: conic-gradient(
          from 200deg,
          #4ade80,
          #22c55e,
          #16a34a,
          #bbf7d0
        );
      }

      /* Alternate wallpapers */
      body.wallpaper-1 .bg {
        background: radial-gradient(
            circle at 0% 0%,
            rgba(244, 114, 182, 0.9) 0,
            transparent 55%
          ),
          radial-gradient(
            circle at 100% 0%,
            rgba(129, 140, 248, 0.9) 0,
            transparent 55%
          ),
          radial-gradient(
            circle at 50% 100%,
            rgba(254, 202, 202, 0.9) 0,
            transparent 60%
          ),
          linear-gradient(135deg, #fdf2ff, #eff6ff, #fef2f2);
      }

      body.wallpaper-2 .bg {
        background: radial-gradient(
            circle at 0% 0%,
            rgba(56, 189, 248, 0.95) 0,
            transparent 55%
          ),
          radial-gradient(
            circle at 100% 0%,
            rgba(59, 130, 246, 1) 0,
            transparent 55%
          ),
          radial-gradient(
            circle at 50% 100%,
            rgba(29, 78, 216, 0.9) 0,
            transparent 60%
          ),
          linear-gradient(135deg, #eff6ff, #e0f2fe, #dbeafe);
      }

      body.wallpaper-3 .bg {
        background: radial-gradient(
            circle at 0% 0%,
            rgba(45, 212, 191, 0.95) 0,
            transparent 55%
          ),
          radial-gradient(
            circle at 100% 0%,
            rgba(22, 163, 74, 0.95) 0,
            transparent 55%
          ),
          radial-gradient(
            circle at 50% 100%,
            rgba(187, 247, 208, 0.85) 0,
            transparent 60%
          ),
          linear-gradient(135deg, #ecfdf5, #dcfce7, #f0fdf4);
      }

      /* Scrollbar subtle style for dropdown */
      .dropdown::-webkit-scrollbar {
        width: 6px;
      }
      .dropdown::-webkit-scrollbar-thumb {
        background: rgba(148, 163, 184, 0.6);
        border-radius: 999px;
      }

      @media (max-height: 640px) {
        .app {
          padding-top: 20px;
        }
        .clock {
          margin-top: 0;
        }
      }
    </style>
  </head>
  <body class="wallpaper-1">
    <div class="bg blur"></div>
    <div class="app">
      <main class="main" aria-label="ä¸“æ³¨å·¥ä½œä¸»é¡µ">
        <header class="clock" aria-label="å®æ—¶æ—¶é—´">
          <div class="clock-time" id="clock-time">
            <span>14</span><span class="colon">:</span><span>25</span>
          </div>
          <div class="clock-date" id="clock-date">2026å¹´2æœˆ19æ—¥ æ˜ŸæœŸå››</div>
        </header>

        <section class="search-section" aria-label="æ™ºèƒ½æœç´¢">
          <div class="search-shell">
            <div class="search-box" id="search-box">
              <div class="search-icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none">
                  <circle
                    cx="11"
                    cy="11"
                    r="6"
                    stroke="currentColor"
                    stroke-width="1.7"
                  ></circle>
                  <path
                    d="M15.5 15.5L20 20"
                    stroke="currentColor"
                    stroke-width="1.7"
                    stroke-linecap="round"
                  ></path>
                </svg>
              </div>
              <input
                id="search-input"
                class="search-input"
                type="text"
                autocomplete="off"
                placeholder="è¯•è¯•è¾“å…¥ â€œå›¾ç‰‡å‹ç¼©â€ã€â€œç¿»è¯‘â€ã€â€œå¾…åŠâ€..."
                aria-label="æœç´¢å·¥å…·"
              />
              <div class="search-enter">
                <span>ç¡®è®¤</span>
                <kbd>Enter</kbd>
              </div>
            </div>

            <div class="dropdown" id="search-dropdown" aria-label="æœç´¢è”æƒ³ç»“æœ">
              <!-- åŠ¨æ€å¡«å…… -->
            </div>
          </div>
        </section>

        <section class="tools-section" aria-label="å¸¸ç”¨å·¥å…·">
          <div class="tools-grid" id="tools-grid">
            <!-- JS åŠ¨æ€æ¸²æŸ“å¸¸ç”¨å·¥å…·å¡ç‰‡ -->
          </div>
        </section>
      </main>

      <footer class="footer">
        <div class="footer-text">ä¿æŒä¸“æ³¨ï¼Œé«˜æ•ˆå·¥ä½œã€‚</div>
        <div class="footer-right">
          <a href="login.html" class="footer-link">åˆ‡æ¢è´¦å·</a>
          <div class="footer-hint">Alt + / èšç„¦æœç´¢</div>
          <button
            class="settings-trigger"
            id="settings-trigger"
            aria-label="æ‰“å¼€è®¾ç½®"
          >
            âš™
          </button>
        </div>
      </footer>

      <div class="settings-panel" id="settings-panel">
        <div class="settings-row">
          <div class="settings-label">æš—é»‘æ¨¡å¼</div>
          <div class="toggle" id="dark-toggle">
            <div class="toggle-circle"></div>
          </div>
        </div>
        <div class="settings-row">
          <div class="settings-label">å£çº¸</div>
          <div class="wallpaper-options" id="wallpaper-options">
            <div
              class="wallpaper-dot active"
              data-wallpaper="1"
              title="æŸ”å’Œæ¸å˜"
            ></div>
            <div
              class="wallpaper-dot"
              data-wallpaper="2"
              title="å†·è‰²å…‹è±å› è“"
            ></div>
            <div
              class="wallpaper-dot"
              data-wallpaper="3"
              title="è–„è·ç»¿æ¸…æ™¨"
            ></div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // å·¥å…·æ•°æ®
      const tools = [
        {
          id: "image-compress",
          name: "å›¾ç‰‡æ— æŸå‹ç¼©",
          desc: "å‹ç¼© PNG/JPG/GIFï¼Œä¿æŒæ¸…æ™°åº¦",
          icon: "ğŸ–¼",
          category: "å¸¸ç”¨å·¥å…·",
          tag: "å›¾ç‰‡",
        },
        {
          id: "image-convert",
          name: "æ ¼å¼è½¬æ¢ï¼ˆPNG â‡„ JPGï¼‰",
          desc: "å¿«é€Ÿæ‰¹é‡æ ¼å¼è½¬æ¢",
          icon: "ğŸ”„",
          category: "å¸¸ç”¨å·¥å…·",
          tag: "å›¾ç‰‡",
        },
        {
          id: "pdf-merge",
          name: "PDF åˆå¹¶ä¸æ‹†åˆ†",
          desc: "åˆå¹¶/æ‹†åˆ† PDF æ–‡ä»¶",
          icon: "ğŸ“„",
          category: "å¸¸ç”¨å·¥å…·",
          tag: "æ–‡æ¡£",
        },
        {
          id: "markdown-preview",
          name: "Markdown é¢„è§ˆ",
          desc: "å®æ—¶é¢„è§ˆä¸å¯¼å‡º HTML",
          icon: "âœï¸",
          category: "å¸¸ç”¨å·¥å…·",
          tag: "å†™ä½œ",
        },
        {
          id: "clipboard-history",
          name: "å‰ªè´´æ¿å†å²",
          desc: "ä¿å­˜å¹¶æœç´¢æœ€è¿‘å¤åˆ¶å†…å®¹",
          icon: "ğŸ“‹",
          category: "å¸¸ç”¨å·¥å…·",
          tag: "æ•ˆç‡",
        },
        {
          id: "color-picker",
          name: "å–è‰²å™¨",
          desc: "ä»å±å¹•å¿«é€Ÿå¸å–é…è‰²",
          icon: "ğŸ¨",
          category: "å¸¸ç”¨å·¥å…·",
          tag: "è®¾è®¡",
        },
        {
          id: "text-compare",
          name: "æ–‡æœ¬å¯¹æ¯” Diff",
          desc: "é«˜äº®å±•ç¤ºä¸¤ç‰ˆå·®å¼‚",
          icon: "ğŸ”",
          category: "å¸¸ç”¨å·¥å…·",
          tag: "å¼€å‘",
        },
        {
          id: "json-format",
          name: "JSON æ ¼å¼åŒ–",
          desc: "ä¸€é”®ç¾åŒ–å’Œæ ¡éªŒ JSON",
          icon: "ğŸ§©",
          category: "å¸¸ç”¨å·¥å…·",
          tag: "å¼€å‘",
        },
        {
          id: "quick-translate",
          name: "å¿«é€Ÿç¿»è¯‘",
          desc: "ä¸­è‹±æ–‡äº’è¯‘ï¼Œæ”¯æŒçŸ­å¥",
          icon: "ğŸŒ",
          category: "æœ€è¿‘ä½¿ç”¨",
          tag: "è¯­è¨€",
        },
        {
          id: "todo-focus",
          name: "ä¸“æ³¨å¾…åŠæ¸…å•",
          desc: "ç•ªèŒ„é’Ÿ + ä»»åŠ¡åˆ—è¡¨",
          icon: "â±",
          category: "æœ€è¿‘ä½¿ç”¨",
          tag: "æ•ˆç‡",
        },
      ];

      const clockTimeEl = document.getElementById("clock-time");
      const clockDateEl = document.getElementById("clock-date");
      const searchBoxEl = document.getElementById("search-box");
      const searchInputEl = document.getElementById("search-input");
      const dropdownEl = document.getElementById("search-dropdown");
      const toolsGridEl = document.getElementById("tools-grid");
      const settingsTriggerEl = document.getElementById("settings-trigger");
      const settingsPanelEl = document.getElementById("settings-panel");
      const darkToggleEl = document.getElementById("dark-toggle");
      const wallpaperOptionsEl = document.getElementById("wallpaper-options");

      let activeDropdownIndex = -1;
      let flatDropdownItems = [];
      let settingsOpen = false;

      // æ—¶é’Ÿ & æ—¥æœŸ
      function pad(num) {
        return num.toString().padStart(2, "0");
      }

      const weekdays = ["æ˜ŸæœŸæ—¥", "æ˜ŸæœŸä¸€", "æ˜ŸæœŸäºŒ", "æ˜ŸæœŸä¸‰", "æ˜ŸæœŸå››", "æ˜ŸæœŸäº”", "æ˜ŸæœŸå…­"];

      function updateClock() {
        const now = new Date();
        const h = pad(now.getHours());
        const m = pad(now.getMinutes());
        const year = now.getFullYear();
        const month = now.getMonth() + 1;
        const day = now.getDate();
        const weekday = weekdays[now.getDay()];

        clockTimeEl.innerHTML =
          '<span>' +
          h +
          "</span><span class=\"colon\">:</span><span>" +
          m +
          "</span>";

        clockDateEl.textContent =
          year + "å¹´" + month + "æœˆ" + day + "æ—¥ " + weekday;
      }

      updateClock();
      setInterval(updateClock, 1000);

      // æ¸²æŸ“å¸¸ç”¨å·¥å…·å¡ç‰‡
      function renderToolCards() {
        toolsGridEl.innerHTML = "";
        tools.slice(0, 10).forEach((tool) => {
          const card = document.createElement("button");
          card.type = "button";
          card.className = "tool-card";
          card.innerHTML =
            '<div class="tool-icon">' +
            tool.icon +
            '</div><div class="tool-text">' +
            '<div class="tool-title">' +
            tool.name +
            "</div>" +
            '<div class="tool-desc">' +
            tool.desc +
            "</div>" +
            '<div class="tool-meta">' +
            '<span class="tool-meta-pill">' +
            tool.category +
            "</span>" +
            "<span>" +
            tool.tag +
            "</span>" +
            "</div></div>";
          card.addEventListener("click", () => {
            alert("ä½ ç‚¹å‡»äº†å·¥å…·ï¼šã€Œ" + tool.name + "ã€ã€‚è¿™é‡Œå¯ä»¥è·³è½¬åˆ°çœŸå®å·¥å…·é¡µã€‚");
          });
          toolsGridEl.appendChild(card);
        });
      }

      renderToolCards();

      // æœç´¢è”æƒ³
      function filterTools(keyword) {
        const q = keyword.trim().toLowerCase();
        if (!q) return tools;
        return tools.filter((tool) => {
          const text = (
            tool.name +
            " " +
            tool.desc +
            " " +
            tool.tag +
            " " +
            tool.category
          ).toLowerCase();
          return text.includes(q);
        });
      }

      function groupByCategory(list) {
        const map = new Map();
        list.forEach((tool) => {
          if (!map.has(tool.category)) {
            map.set(tool.category, []);
          }
          map.get(tool.category).push(tool);
        });
        return Array.from(map.entries());
      }

      function renderDropdown(keyword) {
        const filtered = filterTools(keyword);

        if (!keyword.trim() && filtered.length === 0) {
          dropdownEl.classList.remove("visible");
          flatDropdownItems = [];
          return;
        }

        if (filtered.length === 0) {
          dropdownEl.innerHTML =
            '<div class="dropdown-section-title">æ²¡æœ‰æ‰¾åˆ°ç»“æœ</div>';
          dropdownEl.classList.add("visible");
          flatDropdownItems = [];
          activeDropdownIndex = -1;
          return;
        }

        const groups = groupByCategory(filtered);
        dropdownEl.innerHTML = "";

        flatDropdownItems = [];

        groups.forEach(([category, items], groupIndex) => {
          const title = document.createElement("div");
          title.className = "dropdown-section-title";
          title.textContent = category;
          dropdownEl.appendChild(title);

          const ul = document.createElement("ul");
          ul.className = "dropdown-list";

          items.forEach((tool) => {
            const li = document.createElement("li");
            const btn = document.createElement("button");
            btn.type = "button";
            btn.className = "dropdown-item";
            btn.innerHTML =
              '<div class="dropdown-item-icon">' +
              tool.icon +
              '</div><div class="dropdown-item-content">' +
              '<div class="dropdown-item-title">' +
              tool.name +
              "</div>" +
              '<div class="dropdown-item-desc">' +
              tool.desc +
              "</div>" +
              '</div><div class="dropdown-item-tag">' +
              tool.tag +
              "</div>";
            btn.addEventListener("click", () => {
              handleToolSelect(tool);
            });
            li.appendChild(btn);
            ul.appendChild(li);
            flatDropdownItems.push({ tool, button: btn });
          });

          dropdownEl.appendChild(ul);
        });

        dropdownEl.classList.add("visible");
        activeDropdownIndex = flatDropdownItems.length ? 0 : -1;
        updateActiveDropdownItem();
      }

      function updateActiveDropdownItem() {
        flatDropdownItems.forEach((item, index) => {
          if (index === activeDropdownIndex) {
            item.button.classList.add("active");
            const rect = item.button.getBoundingClientRect();
            const dropdownRect = dropdownEl.getBoundingClientRect();
            if (rect.top < dropdownRect.top) {
              dropdownEl.scrollTop -= dropdownRect.top - rect.top + 8;
            } else if (rect.bottom > dropdownRect.bottom) {
              dropdownEl.scrollTop += rect.bottom - dropdownRect.bottom + 8;
            }
          } else {
            item.button.classList.remove("active");
          }
        });
      }

      function moveActive(delta) {
        if (!flatDropdownItems.length) return;
        activeDropdownIndex =
          (activeDropdownIndex + delta + flatDropdownItems.length) %
          flatDropdownItems.length;
        updateActiveDropdownItem();
      }

      function handleToolSelect(tool) {
        alert(
          "å·²é€‰æ‹©å·¥å…·ï¼šã€Œ" +
            tool.name +
            "ã€ã€‚è¿™é‡Œå¯ä»¥æ¥å…¥å®é™…è·³è½¬é€»è¾‘æˆ–æ‰“å¼€åº”ç”¨ã€‚"
        );
      }

      searchInputEl.addEventListener("input", (e) => {
        renderDropdown(e.target.value);
      });

      searchInputEl.addEventListener("focus", () => {
        searchBoxEl.classList.add("focused");
        if (searchInputEl.value.trim()) {
          renderDropdown(searchInputEl.value);
        }
      });

      searchInputEl.addEventListener("blur", () => {
        searchBoxEl.classList.remove("focused");
        setTimeout(() => {
          dropdownEl.classList.remove("visible");
        }, 120);
      });

      searchInputEl.addEventListener("keydown", (e) => {
        if (e.key === "ArrowDown") {
          e.preventDefault();
          if (!dropdownEl.classList.contains("visible")) {
            renderDropdown(searchInputEl.value);
          } else {
            moveActive(1);
          }
        } else if (e.key === "ArrowUp") {
          e.preventDefault();
          moveActive(-1);
        } else if (e.key === "Enter") {
          e.preventDefault();
          if (
            flatDropdownItems.length &&
            activeDropdownIndex >= 0 &&
            activeDropdownIndex < flatDropdownItems.length
          ) {
            handleToolSelect(flatDropdownItems[activeDropdownIndex].tool);
          } else if (searchInputEl.value.trim()) {
            alert(
              "ä½ æœç´¢äº†ï¼šã€Œ" +
                searchInputEl.value.trim() +
                "ã€ã€‚è¿™é‡Œå¯ä»¥æ¥å…¥å…¨å±€æœç´¢é€»è¾‘ã€‚"
            );
          }
        } else if (e.key === "Escape") {
          dropdownEl.classList.remove("visible");
        }
      });

      // Alt + / å¿«æ·é”® èšç„¦æœç´¢
      window.addEventListener("keydown", (e) => {
        if (e.altKey && e.key === "/") {
          e.preventDefault();
          searchInputEl.focus();
          searchInputEl.select();
        }
      });

      // è®¾ç½®é¢æ¿
      function loadPreferences() {
        try {
          const theme = localStorage.getItem("theme");
          if (theme === "dark") {
            document.body.classList.add("dark");
            darkToggleEl.classList.add("on");
          }
          const wp = localStorage.getItem("wallpaper");
          if (wp === "1" || wp === "2" || wp === "3") {
            setWallpaper(wp, false);
          }
        } catch (e) {
          // å¿½ç•¥å­˜å‚¨é”™è¯¯
        }
      }

      function setWallpaper(id, save = true) {
        document.body.classList.remove("wallpaper-1", "wallpaper-2", "wallpaper-3");
        document.body.classList.add("wallpaper-" + id);
        Array.from(wallpaperOptionsEl.children).forEach((dot) => {
          dot.classList.toggle("active", dot.dataset.wallpaper === String(id));
        });
        if (save) {
          try {
            localStorage.setItem("wallpaper", String(id));
          } catch (e) {}
        }
      }

      settingsTriggerEl.addEventListener("click", () => {
        settingsOpen = !settingsOpen;
        settingsPanelEl.classList.toggle("visible", settingsOpen);
      });

      darkToggleEl.addEventListener("click", () => {
        const on = !darkToggleEl.classList.contains("on");
        darkToggleEl.classList.toggle("on", on);
        document.body.classList.toggle("dark", on);
        try {
          localStorage.setItem("theme", on ? "dark" : "light");
        } catch (e) {}
      });

      wallpaperOptionsEl.addEventListener("click", (e) => {
        const dot = e.target.closest(".wallpaper-dot");
        if (!dot) return;
        const id = dot.dataset.wallpaper;
        if (!id) return;
        setWallpaper(id);
      });

      // ç‚¹å‡»é¡µé¢ç©ºç™½å¤„å…³é—­è®¾ç½®
      document.addEventListener("click", (e) => {
        if (
          settingsOpen &&
          !settingsPanelEl.contains(e.target) &&
          !settingsTriggerEl.contains(e.target)
        ) {
          settingsOpen = false;
          settingsPanelEl.classList.remove("visible");
        }
      });

      loadPreferences();
    </script>
  </body>
</html>

